<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <title>React53的配套教科书</title><meta name="description" content="交互式React进阶课程"><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="VuePress 2.0.0-beta.23">
    <link rel="preload" href="/assets/js/runtime~app.fb58c613.js" as="script"><link rel="preload" href="/assets/css/styles.d0669cdc.css" as="style"><link rel="preload" href="/assets/js/640.022c203e.js" as="script"><link rel="preload" href="/assets/js/app.35d3ceab.js" as="script">
    <link rel="stylesheet" href="/assets/css/styles.d0669cdc.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><header class="navbar"><div class="toggle-sidebar-button"><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><span><a aria-current="page" href="/" class="router-link-active router-link-exact-active"><img class="logo" src="https://ftp.bmp.ovh/imgs/2021/07/8ca4fe5532804c16.jpeg" alt="React53的配套教科书"><span class="site-name can-hide">React53的配套教科书</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/BetaSu/react53" rel="noopener noreferrer" target="_blank" aria-label="点亮⭐不迷路"><!--[--><!--]--> 点亮⭐不迷路 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><div class="sidebar-mask"></div><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/BetaSu/react53" rel="noopener noreferrer" target="_blank" aria-label="点亮⭐不迷路"><!--[--><!--]--> 点亮⭐不迷路 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><a href="/index.md" class="nav-link sidebar-heading sidebar-item active" aria-label="本课程解决的问题"><!--[--><!--]--> 本课程解决的问题 <!--[--><!--]--></a><!----><!--]--><!--[--><a href="/chart1.md" class="nav-link sidebar-heading sidebar-item" aria-label="第一课：工作原理概览"><!--[--><!--]--> 第一课：工作原理概览 <!--[--><!--]--></a><!----><!--]--><!--[--><a href="/chart2.md" class="nav-link sidebar-heading sidebar-item" aria-label="第二课：render阶段概览"><!--[--><!--]--> 第二课：render阶段概览 <!--[--><!--]--></a><!----><!--]--><!--[--><a href="/chart3.md" class="nav-link sidebar-heading sidebar-item" aria-label="第三课：状态更新原理"><!--[--><!--]--> 第三课：状态更新原理 <!--[--><!--]--></a><!----><!--]--><!--[--><a href="/chart4.md" class="nav-link sidebar-heading sidebar-item" aria-label="第四课：性能优化原理"><!--[--><!--]--> 第四课：性能优化原理 <!--[--><!--]--></a><!----><!--]--><!--]--></ul><!--[--><!--]--></aside><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h2 id="这一次-真的学懂react😄" tabindex="-1"><a class="header-anchor" href="#这一次-真的学懂react😄" aria-hidden="true">#</a> 这一次，真的学懂React😄</h2><p>大家好，我是卡颂。<code>React</code>真是太难学了。</p><p>一开始，我以为原因是我菜。但在用了3年<code>React</code>、深入学习其源码并写了<a href="https://react.iamkasong.com/" target="_blank" rel="noopener noreferrer">React技术揭秘<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>后发现，问题出在<code>React</code>本身。</p><p>他太反直觉了。我举两个例子：</p><h3 id="例一" tabindex="-1"><a class="header-anchor" href="#例一" aria-hidden="true">#</a> 例一</h3><p>你用过<code>PureComponent</code>、<code>React.memo</code>这两个<code>API</code>么？他们的作用是？</p><p>你可能会说：这两个是性能优化<code>API</code>，用来减少不必要的<code>render</code>。</p><p>那么问题来了，为什么会有不必要的<code>render</code>？最符合直觉的更新方式莫过于：<code>A</code>组件触发更新，那么只有<code>A</code>及其子孙组件会<code>render</code>。</p><p>然而在<code>React</code>中，<code>A</code>触发更新，与<code>A</code>不相干的<code>B</code>也可能<code>render</code>，所以需要<code>PureComponent</code>这样的性能优化<code>API</code>阻止<code>B</code>的无意义<code>render</code>。</p><p>所以，为了熟练掌握<code>PureComponent</code>、<code>React.memo</code>的使用，你得先了解<code>React</code>内部的更新流程。</p><h3 id="例二" tabindex="-1"><a class="header-anchor" href="#例二" aria-hidden="true">#</a> 例二</h3><p><code>Hooks</code>是<code>React</code>的未来。这是个优秀的设计，很多库都借鉴了他的理念（比如<code>Vue3</code>的<code>Composition API</code>）。</p><p>在<a href="https://zh-hans.reactjs.org/docs/hooks-rules.html" target="_blank" rel="noopener noreferrer">React文档<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>提到，使用<code>Hooks</code>需要遵循如下限制：</p><blockquote><p>不要在循环，条件或嵌套函数中调用 Hook</p></blockquote><p>作为借鉴其理念的<code>Vue3 Composition API</code>就没有这样的限制，是不是很奇怪？</p><h2 id="难学的源头" tabindex="-1"><a class="header-anchor" href="#难学的源头" aria-hidden="true">#</a> 难学的源头</h2><p>以上两个例子都指出一个问题：为了掌握这些<code>API</code>，还得懂内部工作原理，这难道不反直觉么？</p><p>如果再深究细节的话，原因是：出于降低新人上手难度的原因，官方文档并没有讲解<code>React</code>内部的架构（<code>Fiber</code>架构）。但是当我们的项目逐渐复杂，这套架构的影响就会逐渐显现。这也是很多同学只看官方文档可以入门，但难精通的原因。</p><p>以上两个问题的本质原因都在于<code>Fiber</code>架构的工作原理。</p><p>所以，我认为更好的<code>React</code>进阶方式是从了解<code>Fiber</code>架构的工作原理开始，以此为基石逐步铺开到整个<code>React</code>的方方面面。</p><h2 id="该怎么学" tabindex="-1"><a class="header-anchor" href="#该怎么学" aria-hidden="true">#</a> 该怎么学</h2><p>根据<a href="https://baike.baidu.com/item/%E8%B4%B9%E6%9B%BC%E5%AD%A6%E4%B9%A0%E6%B3%95/50895393" target="_blank" rel="noopener noreferrer">费曼学习法<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>，常见的学习方式（被动学习）效果并不是最好的：</p><img src="/images/feiman.png" alt="费曼学习法"><blockquote><p>就我本人而言，我在写了<a href="https://react.iamkasong.com/" target="_blank" rel="noopener noreferrer">React技术揭秘<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>（主动学习中的<code>传授给他人</code>）后对<code>React</code>的认识有了极大提高</p></blockquote><p>为了让大家更易学懂，本教程采用了与众不同的学习方式，主要有3点：</p><h3 id="_1-主动实践" tabindex="-1"><a class="header-anchor" href="#_1-主动实践" aria-hidden="true">#</a> 1. 主动实践</h3><p>教程配套了一个动手项目，该项目中的<code>React</code>被我魔改过源码，可以让你在控制台看到<code>React</code>源码内部的工作流程（对应主动学习中的<code>实践</code>）</p><h3 id="_2-课后习题" tabindex="-1"><a class="header-anchor" href="#_2-课后习题" aria-hidden="true">#</a> 2. 课后习题</h3><p>在习题项目中，每一课都有课后习题，供你练习这一节课学到的知识。所有习题都配备了测试用例，写完习题记得跑一遍用例看看有没有100分（对应主动学习中的<code>实践</code>）</p><h3 id="_3-课后讨论" tabindex="-1"><a class="header-anchor" href="#_3-课后讨论" aria-hidden="true">#</a> 3. 课后讨论</h3><p>学完后有不懂的，可以加群和志同道合的小伙伴一起讨论（<a href="/extra/me.html" class="">点我加群</a>）（对应主动学习中的<code>讨论</code>）也欢迎热心的大佬们和我一起在群里给大伙儿答答疑，毕竟<code>传授给他人</code>是最高效的学习方式</p><h2 id="我们会怎么学" tabindex="-1"><a class="header-anchor" href="#我们会怎么学" aria-hidden="true">#</a> 我们会怎么学</h2><p>前三节是基础篇，带你了解<code>React</code>内部的运行原理。有了基础，接下来我们会讨论<code>性能优化</code>、<code>Hooks底层</code>等更高阶的内容。</p><h2 id="还等什么-撸起袖子一起愉快的学习吧" tabindex="-1"><a class="header-anchor" href="#还等什么-撸起袖子一起愉快的学习吧" aria-hidden="true">#</a> 还等什么，撸起袖子一起愉快的学习吧～</h2><p>执行命令，根据提示创建课程工程目录：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>npx react53
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="nav-link external meta-item-label" href="https://github.com/BetaSu/react53/edit/main/index.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">2021/8/13 上午10:30:30</span></div><!----></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/assets/js/runtime~app.fb58c613.js" defer></script><script src="/assets/js/640.022c203e.js" defer></script><script src="/assets/js/app.35d3ceab.js" defer></script>
  </body>
</html>
