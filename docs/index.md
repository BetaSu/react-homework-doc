## 这一次，真的学懂React😄

大家好，我是卡颂。`React`真是太难学了。

一开始，我以为原因是我菜。但在用了3年`React`、深入学习其源码并写了[React技术揭秘](https://react.iamkasong.com/)后发现，问题出在`React`本身。

他太反直觉了。我举两个例子：

### 例一

你用过`PureComponent`、`React.memo`这两个`API`么？他们的作用是？

你可能会说：这两个是性能优化`API`，用来减少不必要的`render`。

那么问题来了，为什么会有不必要的`render`？最符合直觉的更新方式莫过于：`A`组件触发更新，那么只有`A`及其子孙组件会`render`。

然而在`React`中，`A`触发更新，与`A`不相干的`B`也可能`render`，所以需要`PureComponent`这样的性能优化`API`阻止`B`的无意义`render`。

所以，为了熟练掌握`PureComponent`、`React.memo`的使用，你得先了解`React`内部的更新流程。

### 例二

`Hooks`是`React`的未来。这是个优秀的设计，很多库都借鉴了他的理念（比如`Vue3`的`Composition API`）。

在[React文档](https://zh-hans.reactjs.org/docs/hooks-rules.html)提到，使用`Hooks`需要遵循如下限制：

> 不要在循环，条件或嵌套函数中调用 Hook

作为借鉴其理念的`Vue3 Composition API`就没有这样的限制，是不是很奇怪？

## 难学的源头

以上两个例子都指出一个问题：为了掌握这些`API`，还得懂内部工作原理，这难道不反直觉么？

如果再深究细节的话，原因是：出于降低新人上手难度的原因，官方文档并没有讲解`React`内部的架构（`Fiber`架构）。但是当我们的项目逐渐复杂，这套架构的影响就会逐渐显现。这也是很多同学只看官方文档可以入门，但难精通的原因。

以上两个问题的本质原因都在于`Fiber`架构的工作原理。

所以，我认为更好的`React`进阶方式是从了解`Fiber`架构的工作原理开始，以此为基石逐步铺开到整个`React`的方方面面。

## 该怎么学

根据[费曼学习法](https://baike.baidu.com/item/%E8%B4%B9%E6%9B%BC%E5%AD%A6%E4%B9%A0%E6%B3%95/50895393)，常见的学习方式（被动学习）效果并不是最好的：

<img :src="$withBase('/images/feiman.png')" alt="费曼学习法">

> 就我本人而言，我在写了[React技术揭秘](https://react.iamkasong.com/)（主动学习中的`传授给他人`）后对`React`的认识有了极大提高

为了让大家更易学懂，本教程采用了与众不同的学习方式，主要有3点：

### 1. 主动实践

教程配套了一个动手项目，该项目中的`React`被我魔改过源码，可以让你在控制台看到`React`源码内部的工作流程（对应主动学习中的`实践`）

### 2. 课后习题

在习题项目中，每一课都有课后习题，供你练习这一节课学到的知识。所有习题都配备了测试用例，写完习题记得跑一遍用例看看有没有100分（对应主动学习中的`实践`）

### 3. 课后讨论

学完后有不懂的，可以加群和志同道合的小伙伴一起讨论（[点我加群](./extra/me.md)）（对应主动学习中的`讨论`）也欢迎热心的大佬们和我一起在群里给大伙儿答答疑，毕竟`传授给他人`是最高效的学习方式

## 我们会怎么学

前三节是基础篇，带你了解`React`内部的运行原理。有了基础，接下来我们会讨论`性能优化`、`Hooks底层`等更高阶的内容。

## 还等什么，撸起袖子一起愉快的学习吧～

执行命令，根据提示创建课程工程目录：

```sh
npx react53
```